---
title: "Creating Overview Pages"
url: /refguide/view-entity-overview-pages/

---

## Introduction

Use view entities to show data across multiple associated entities.

For this purpose of this use case, the following domain model is used:

## Create a Data Grid 

In this scenario, create an overview page that lists each product in a [data grid]( /appstore/modules/data-grid-2/), including information about its category and supplier. 
With view entities, you do not have to manage associations when showing the data in a data grid. This means that all fields are filterable and sortable, which allows for higher performance and flexibility.

Create a view entity that combines only the relevant attributes of the entities *Product*, *Supplier*, and *Category*. To do this, follow these steps:

1. Open your domain model and add a new view entity.
2. Name the view entity *ProductOverviewVE*
3. Add the following OQL query to the entity:

```
SELECT
  p.ProductId as ProductId,
  p.ProductName as ProductName,
  p.QuantityPerUnit as QuantityPerUnit,
  p.Discontinued as Discontinued,
  s.CompanyName as Supplier, 
  c.CategoryName as Category
FROM Shop.Product as p
  JOIN p/Shop.Product_Supplier/Shop.Supplier as s
  JOIN p/Shop.Product_Category/Shop.Category as c

```

4. Click OK. The view entity is added to your domain model.
5. Generate an overview page by right-clicking the entity and selecting **Generate overview pages**.
6. Run your app locally, then click **View App**. You should see the data grid populated with the information that you want to show, provided you have added data to your grid.

## Alternative to Calculated Attributes

With a view entity, you can still search and sort items. You also receive the calculated attribute (or Total Value). This is only calculated once, unlike a non-persistent entity, where it is calculated each time the object is accessed. 

For example, an `OrderLine` represents a single entry in an order. It has the following attributes:

* `UnitPrice`
* `Quantity`
* `Discount`

Suppose you want to get the total value information of each order line, which is given by the formula `Total = UnitPrice * Quantity* (1 – Discount)`. To do this, create a view entity named `OrderLineWithTotal` and use the following query:

```
SELECT
  ol.OrderLineId as OrderLineId,
  ol.Quantity as Quantity,
  ol.UnitPrice as UnitPrice,
  ol.Discount as Discount,
  (ol.Quantity * ol.UnitPrice * (1 - ol.Discount)) as Total
FROM Shop.OrderLine ol
```

You can use this view entity in a data grid and show the total.

From here, you can calulate the total value of an order by joining the `OrderLine` and `Order`table. To do this, create a new view entity named *OrderWithTotalValue* with the following query: 

```
SELECT
  o.OrderId as OrderId,
  o.OrderDate as OrderDate,
  o.RequiredDate as RequiredDate,
  o.ShippedDate as ShippedDate,
  SUM(ol.UnitPrice * ol.Quantity * (1 - ol.Discount)) as TotalOrderValue,
  SUM(ol.Quantity) as TotalProductCount,
  COUNT(*) as UniqueProductCount
FROM Shop."Order" as o
  JOIN o/Shop.OrderLine_Order/Shop.OrderLine as ol
GROUP BY o.OrderId, o.OrderDate, o.RequiredDate, o.ShippedDate
```

This will result in a view entity that shows the total value of every order.

{{% alert color="info" %}} 
Notice the quotation marks in `Shop.”Order”`. This is because `Order` is a reserved keyword in OQL. To avoid ambiguity, quotation marks are put around the word. 
{{% /alert %}}

## Update Underlying Persistent Entities

On the product overview page above, there is no button to add or modify a product. This can be added to a view entity to update its corresponding persistent entity object.

1. Create a microflow that takes the `ProductOverviewVE` object.
   
* *Add a [retrieve]( /refguide/retrieve/) activity. In this activity, retrieve a `Product`object with the following XPath constraint: 
`[(ProductId = $ProductOverviewVE/ProductId)]`
* *Add a [Change Object]( /refguide/change-object/) activity. In this activity, change the attributes of `Product` to reflect those of `ProductOverviewVE`. Make sure to commit the change. 
  
2. Open the NewEdit page that was generated by ProductOverviewVE.
3. Place a data view with `ProductOverviewVE`as the data source. 
4. Remove the Supplier and Category fields.
5. Add a new custom column to the data grid on the Overview page and add an **Edit** button.
6. Link this button to the Edit Product page. 

Once these steps are complete, run your app locally and test the functionality.

## Update Associated Product Category and Supplier

Add the capability to update a product’s associated category and supplier. To do this, follow these steps:

1. Add the columns `CategoryId` and `SupplierId` to `ProductOverviewVE`. Use the following query:

```
SELECT
  p.ProductId as ProductId,
  p.ProductName as ProductName,
  p.QuantityPerUnit as QuantityPerUnit,
  p.Discontinued as Discontinued,
  s.CompanyName as Supplier,
  c.CategoryName as Category,
  s.SupplierId as SupplierId,
  c.CategoryId as CategoryId
FROM Shop.Product as p
  JOIN p/Shop.Product_Supplier/Shop.Supplier as s
  JOIN p/Shop.Product_Category/Shop.Category as c
```

2. Create two more view entities that retrieve ID and Names from the Supplier and Category tables. Use the following two queries:

```
SELECT
  s.SupplierId as SupplierId,
  s.CompanyName as SupplierName
FROM Shop.Supplier s
```

```
SELECT
  c.CategoryId as CategoryId,
  c.CategoryName as CategoryName
FROM Shop.Category c
```

3. On the Edit ProductOverviewVE page, add a Combo box inside the data view.
4. In the Data source field, select **Database**, then under Selectable objects, click **Edit** > **Entity (path)** > **CategoryNames**. Then, click **Select**.  
5. In the Attribute field, select `CategoryId` for the Value and Attribute. 
6. In the Caption field, next to Caption, click **Select** > **CategoryName**.
7.	Add another Combo box and repeat the above steps for the Supplier view entity. 

Your final form should look like this:

## Update Product Microflow

Once the Product page is complete, you must update the related microflow. 

1.	Open your microflow and add a Retrieve activity after the previous Retrieve product acidity. 
2.	Retrieve a Category object from the database where `CategoryId = $ProductOverviewVE/CategoryId`.
3.	Add another Retrieve activity for the supplier. 
4.	In the existing Change Product activity, add the Category and Supplier associations and set them to their corresponding objects. 

When you run your app, you should now be able to update the product’s category and supplier. 

## Add a New Product

You can use a view entity to add a new product into the existing database. Follow the steps below:

1.	Create a new microflow and name it *CreateProduct*
2.	Add a Create object activity to create a *Product* (the persistent entity) object. Leave all the attributes blank.
3.	Set Commit to **Yes**.
4.	Place a Retrieve object activity right after the previous activity. 
5.	Retrieve a `ProductOverviewVE` that corresponds to the new `Product` object ( `ProductId = $NewProduct/ProductId`). 
6.	Add a Show page activity and set it to open the Edit Product page. Use `NewProductVE` as the page parameter. 
7.	Add a button to the Product Overview page and link to to the Create Product microflow. 

